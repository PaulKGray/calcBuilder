var calcBuilder=angular.module("calcBuilder",["ui.router","firebase"]).config(function(n,t){t.otherwise("/calcList");n.state("calcList",{url:"/calcList",templateUrl:"app/calcList/tpl.calcList.html",controller:"ctrl.calcList"}).state("calcListadd",{url:"/calcListAdd",templateUrl:"app/calcList/add/tpl.calcListAdd.html",controller:"ctrl.calcList.Add"}).state("calcEditor",{url:"/calcEditor",templateUrl:"app/calcEditor/tpl.calcEditor.html",controller:"ctrl.calcEditor"}).state("dataItemList",{url:"/dataItemList",templateUrl:"app/dataItemList/tpl.dataItemList.html",controller:"ctrl.dataItemList"}).state("dataItemAdd",{url:"/dataItemAdd",templateUrl:"app/dataItemList/add/tpl.dataItemAdd.html",controller:"ctrl.dataItem.Add"})});calcBuilder.constant("FIREBASEURL","https://calulationbuilder.firebaseio.com/");calcBuilder.service("calculationService",["FIREBASEURL","$firebase",function(n,t){var i=n+"1/calculation/",r=new Firebase(i);this.calulations=t(r);this.addNew=function(n){this.calulations.$add(n)}}]);calcBuilder.service("dataItemService",["FIREBASEURL","$firebase",function(n,t){var i=n+"1/dataItems/",r=new Firebase(i);this.dataItems=t(r);this.addDataItem=function(n){this.dataItems.$add(n)}}]);calcBuilder.factory("calculationEditorService",function(){function i(i,r){var u,f,e;console.log(i);console.log(r);u=i.replace(/\s/g,"");switch(r){case 1:e="<var>"+i+"<\/var>";f="dataItem."+u;n.addRules.dataItem=!1;n.addRules.operands=!0;n.addRules.conditional=!1;n.addRules.bracketStart=!1;t>0&&(n.addRules.bracketEnd=!0);break;case 2:e="<code>"+i+"<\/code>";f=""+u+"";n.addRules.dataItem=!0;n.addRules.operands=!1;n.addRules.conditional=!1;n.addRules.bracketStart=!0;n.addRules.bracketEnd=!1;break;case 3:e="<code>"+i+"<\/code>";f=u;t+=1;n.addRules.bracketEnd=!0;n.addRules.dataItem=!0;break;case 4:e="<code>"+i+"<\/code>";f=u;t-=1;n.addRules.operands=!1;n.addRules.conditional=!1;t==0&&(n.addRules.bracketEnd=!1);break;case 99:e="<samp>"+u+"<\/samp>";f="calculation."+u;n.addRules.dataItem=!1;n.addRules.operands=!0;n.addRules.conditional=!1}return{htmlTag:e,codeTag:f}}var n={},t=0;return n.addNew=function(n,t){return i(n,t)},n.addRules={dataItem:!0,operands:!1,bracketStart:!0,bracketEnd:!1,conditional:!0},n});calcBuilder.filter("to_trusted",["$sce",function(n){return function(t){return n.trustAsHtml(t)}}]);calcBuilder.directive("calceditor",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){r.$render=function(){t.html(r.$viewValue)};$(function(){t.on("blur",function(){n.$apply(function(){r.$setViewValue(t.html())})});t.on("mouseover","var",function(){this.childNodes[0]!=null});t.on("mouseleave","var",function(){this.removeChild(this.childNodes[1])})});r.$setViewValue(t.html())}}});calcBuilder.controller("ctrl.calcEditor",["$scope","$state",function(){}]);calcBuilder.controller("ctrl.calcList",["$scope","$state","calculationService",function(n,t,i){n.calculations=i.calulations;console.log(n.calculations)}]);calcBuilder.controller("ctrl.calcList.Add",["$scope","$state","calculationService","dataItemService","calculationEditorService",function(n,t,i,r,u){n.calculation={code:"return ",calculation:""};n.dataItems=r.dataItems;n.calculations=i.calulations;n.addRules=u.addRules;n.addNew=function(){var t=n.calculation;console.log("hello");console.log(n.calculationView);t.display=n.calculationView;i.addNew(t)};n.AddTag=function(t,i){var r=u.addNew(t,i);n.calculation.code+=r.codeTag;n.calculation.calculation+=r.htmlTag}}]);calcBuilder.controller("ctrl.dataItemList",["$scope","$state","dataItemService",function(n,t,i){n.dataItems=i.dataItems}]);calcBuilder.controller("ctrl.dataItem.Add",["$scope","$state","dataItemService",function(n,t,i){n.addNew=function(){if(n.form.$valid){var r=n.dataItem;i.addDataItem(r);t.transitionTo("dataItemList")}}}]);
/*
//# sourceMappingURL=calcBuilder.min.js.map
*/