var calcBuilder=angular.module("calcBuilder",["ui.router","firebase"]).config(function(n,t){t.otherwise("/calcList");n.state("calcList",{url:"/calcList",templateUrl:"app/calcList/tpl.calcList.html",controller:"ctrl.calcList"}).state("calcListadd",{url:"/calcListAdd",templateUrl:"app/calcList/add/tpl.calcListAdd.html",controller:"ctrl.calcList.Add"}).state("calcEditor",{url:"/calcEditor",templateUrl:"app/calcEditor/tpl.calcEditor.html",controller:"ctrl.calcEditor"}).state("dataItemList",{url:"/dataItemList",templateUrl:"app/dataItemList/tpl.dataItemList.html",controller:"ctrl.dataItemList"}).state("dataItemAdd",{url:"/dataItemAdd",templateUrl:"app/dataItemList/add/tpl.dataItemAdd.html",controller:"ctrl.dataItem.Add"})});calcBuilder.constant("FIREBASEURL","https://calulationbuilder.firebaseio.com/");calcBuilder.service("calculationService",["FIREBASEURL","$firebase",function(n,t){var i=n+"1/calculation/",r=new Firebase(i);this.calulations=t(r);this.addNew=function(n){this.calulations.$add(n)}}]);calcBuilder.service("dataItemService",["FIREBASEURL","$firebase",function(n,t){var i=n+"1/dataItems/",r=new Firebase(i);this.dataItems=t(r);this.addDataItem=function(n){this.dataItems.$add(n)}}]);calcBuilder.filter("to_trusted",["$sce",function(n){return function(t){return n.trustAsHtml(t)}}]);calcBuilder.directive("calceditor",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){r.$render=function(){t.html(r.$viewValue)};$(function(){t.on("blur",function(){n.$apply(function(){r.$setViewValue(t.html())})});t.on("mouseover","var",function(){alert(this)})});r.$setViewValue(t.html())}}});calcBuilder.controller("ctrl.calcEditor",["$scope","$state",function(){}]);calcBuilder.controller("ctrl.calcList",["$scope","$state","calculationService",function(n,t,i){n.calculations=i.calulations;console.log(n.calculations)}]);calcBuilder.controller("ctrl.calcList.Add",["$scope","$state","calculationService","dataItemService",function(n,t,i,r){n.calculation={code:"return ",calculation:""};n.dataItems=r.dataItems;n.calculations=i.calulations;var u=0;n.addRules={dataItem:!0,operands:!1,bracketStart:!0,bracketEnd:!1,conditional:!0};n.addNew=function(){var t=n.calculation;console.log("hello");console.log(n.calculationView);t.display=n.calculationView;i.addNew(t)};n.AddTag=function(t,i){var r,f;switch(i){case 1:f="<var>"+t+"<\/var>";r="dataItem."+t;n.addRules.dataItem=!1;n.addRules.operands=!0;n.addRules.conditional=!1;n.addRules.bracketStart=!1;u>0&&(n.addRules.bracketEnd=!0);break;case 2:f="<code>"+t+"<\/code>";r=""+t+"";n.addRules.dataItem=!0;n.addRules.operands=!1;n.addRules.conditional=!1;n.addRules.bracketStart=!0;n.addRules.bracketEnd=!1;break;case 3:f="<code>"+t+"<\/code>";r=t;u+=1;n.addRules.bracketEnd=!0;n.addRules.dataItem=!0;break;case 4:f="<code>"+t+"<\/code>";r=t;u-=1;n.addRules.operands=!1;n.addRules.conditional=!1;u==0&&(n.addRules.bracketEnd=!1);break;case 99:f="<samp>"+t+"<\/samp>";r="calculation."+t;n.addRules.dataItem=!1;n.addRules.operands=!0;n.addRules.conditional=!1}n.calculation.code+=r;n.calculation.calculation+=f}}]);calcBuilder.controller("ctrl.dataItemList",["$scope","$state","dataItemService",function(n,t,i){n.dataItems=i.dataItems}]);calcBuilder.controller("ctrl.dataItem.Add",["$scope","$state","dataItemService",function(n,t,i){n.addNew=function(){if(n.form.$valid){var r=n.dataItem;i.addDataItem(r);t.transitionTo("dataItemList")}}}]);
/*
//# sourceMappingURL=calcBuilder.min.js.map
*/